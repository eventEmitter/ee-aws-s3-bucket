{
  "name": "ee-resource-pool",
  "description": "resource pool with queueing and rate limiting",
  "version": "0.1.0",
  "homepage": "https://github.com/eventEmitter/ee-resource-pool",
  "author": {
    "name": "Michael van der Weg",
    "email": "michael@eventemitter.com",
    "url": "http://eventemitter.com/"
  },
  "repository": {
    "url": "https://github.com/eventEmitter/ee-resource-pool"
  },
  "engines": {
    "node": "*"
  },
  "bugs": {
    "url": "https://github.com/eventEmitter/ee-resource-pool/issues"
  },
  "dependencies": {
    "ee-class": "*",
    "ee-event-emitter": "*",
    "ee-types": "*",
    "ee-log": "*",
    "ee-error": "*",
    "ee-ttl-queue": "*",
    "ee-rate-limiter": "*"
  },
  "devDependencies": {},
  "optionalDependencies": {},
  "readme": "# ee-resource-pool\n\nresource pool for managing shared resources \n\n## installation\n\n\tnpm install ee-resource-pool\n\n## usage\n\nexample of a pool of connections, there may never be more than 50 connections open. \n\n\n\tvar ResourcePool = require( \"ee-resource-pool\" );\n\n\n\tvar pool = new ResourcePool( {\n\t\t  max: 50 \t\t\t\t\t// max 50 connections\n\t\t, maxWaitingRequests: 1000 \t// fail requests for a connection when there are already more then 1'000 requests waiting\n\t\t, timeout: 5000 \t\t\t// fail requests for a connection after waiting 5 seconds\n\t\t, idle: 600000 \t\t\t\t// close conenctions if they weren't used in the last 10 minutes\n\t\t, prefetch: 10 \t\t\t\t// create always 10% more connections currently used, so we neevr have to wait for aconnection to be created\n\t} );\n\n\n\t// the pool can request more resources\n\tpool.on( \"resourceRequest\", function( callback ){\n\t\tcallback( new Connection() );\n\t} );\n\n\n\t// this code is placed where you request the connections\n\tpool.get( function( err, connection ){\n\t\tif ( err ){\n\t\t\tif ( err.name === \"CapacityOverloadException\" ) {\n\t\t\t\tconsole.log( \"the resource pool is over capacity ...\", err );\n\t\t\t}\n\t\t\telse if ( err.name === \"RequestTimeoutException\" ){\n\t\t\t\tconsole.log( \"timeout while waiting for a free connection ...\", err );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// use the connection\n\t\t\t// IMPORTANT: if you are finished using ti you have to call the «freeResource» or «closeResource» method \n\n\t\t\tconnection.query( \"whatever\", function( err, data ){\n\t\t\t\tif ( err ){\n\t\t\t\t\tconsole.log( \"crap, my query failed\" );\n\t\t\t\t\tconnection.closeResource();\n\t\t\t\t\tconnection.close();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log( \"got some data :)\" );\n\t\t\t\t\tconnection.freeResource();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n\n\nexample of an image uploader which never should upload more than 5 images at the same time\n\n\tvar ResourcePool = require( \"ee-resource-pool\" );\n\n\n\tvar pool = new ResourcePool( {\n\t\t  timeout: 3600000 \t\t\t// fail if we cannot upload an image within the next hour\n\t\t, ratelLimit: 5 \t\t\t// max 5 uploads / second\n\t} );\n\n\n\t// the pool can request more resources\n\tpool.on( \"resourceRequest\", function( callback ){\n\t\tcallback( new Uploader() );\n\t} );\n\n\n\t// this code is placed where you uploader your imges, it will rate liimit your request...\n\tpool.get( function( err, uploader ){\n\t\tif ( err ){\n\t\t\tif ( err.name === \"RequestTimeoutException\" ){\n\t\t\t\tconsole.log( \"timeout while waiting for a free uploader ...\", err );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// use the uploader\n\t\t\t// IMPORTANT: if you are finished using ti you have to call the «freeResource» or «closeResource» method \n\n\t\t\tuploader.upload.query( data, function( err ){\n\t\t\t\tif ( err ){\n\t\t\t\t\tconsole.log( \"crap, the upload failed\" );\n\t\t\t\t\tuploader.closeResource();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log( \"upload finished :)\" );\n\t\t\t\t\tuploader.freeResource();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );",
  "readmeFilename": "README.md",
  "_id": "ee-resource-pool@0.1.0",
  "dist": {
    "shasum": "2d8c56540cb789bfa08490b7ec3faaa2c277a7c1"
  },
  "_from": "ee-resource-pool@*",
  "_resolved": "https://registry.npmjs.org/ee-resource-pool/-/ee-resource-pool-0.1.0.tgz"
}
